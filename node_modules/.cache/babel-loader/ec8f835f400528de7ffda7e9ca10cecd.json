{"ast":null,"code":"import _regeneratorRuntime from \"/home/sotatek/Music/NFT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/sotatek/Music/NFT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/sotatek/Music/NFT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/sotatek/Music/NFT/src/components/CancelOrder/CancelOrder.jsx\";\n\nimport React, { useEffect, useState } from 'react';\nimport Check from \"../../components/Check/Check\";\nimport Spinner from \"../../components/Spinner/Spinner\";\nimport Fail from \"../../components/Fail/Fail\";\nimport { SCAN_URL } from \"../../config\";\nimport { useMarketPlaceContract } from \"../../utils/smartcontract\";\n\nvar CancelOrder = function CancelOrder(_ref) {\n  var data = _ref.data,\n      itemIndex = _ref.itemIndex,\n      onCanceled = _ref.onCanceled;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      status = _useState2[0],\n      setStatus = _useState2[1];\n\n  var orderId = \"\";\n\n  if (data) {\n    orderId = data.order_id;\n  }\n\n  var _useMarketPlaceContra = useMarketPlaceContract(),\n      _useMarketPlaceContra2 = _slicedToArray(_useMarketPlaceContra, 2),\n      _useMarketPlaceContra3 = _useMarketPlaceContra2[0],\n      hash = _useMarketPlaceContra3.hash,\n      receipt = _useMarketPlaceContra3.receipt,\n      cancelError = _useMarketPlaceContra3.error,\n      cancelOrder = _useMarketPlaceContra2[1].cancelOrder;\n\n  useEffect(function () {\n    if (hash) {\n      setStatus(\"transactionHash\");\n    }\n\n    if (receipt) {\n      if (receipt.code === 4001) {\n        setStatus(\"fail\");\n      } else {\n        setStatus(\"done\");\n      }\n    }\n\n    if (cancelError) {\n      setStatus(\"fail\");\n      console.log(\"fail\", cancelError);\n    }\n  }, [hash, receipt, cancelError]);\n  useEffect(function () {\n    if ([\"fail\", \"done\"].indexOf(status) !== -1) {\n      onCanceled(status, itemIndex);\n    }\n  }, [status]);\n\n  var handleCancelOrder = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setStatus(\"processing\");\n              cancelOrder(orderId);\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleCancelOrder() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var renderButtonByStatus = function renderButtonByStatus(status) {\n    switch (status) {\n      case \"processing\":\n        return /*#__PURE__*/React.createElement(\"button\", {\n          className: \"btn btn-primary d-flex justify-content-center\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Spinner, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          className: \"text-white\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 15\n          }\n        }, \"Processing...\")));\n\n      case \"transactionHash\":\n        return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n          className: \"text-color pb-2\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 15\n          }\n        }, \"Your transaction is processing\"), /*#__PURE__*/React.createElement(\"a\", {\n          className: \"btn btn-primary d-flex justify-content-center\",\n          href: \"\".concat(SCAN_URL, \"/tx/\").concat(hash),\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(Spinner, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          className: \"text-white\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 19\n          }\n        }, \"Check it\"))));\n\n      case \"done\":\n        return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n          className: \"text-color space-y-20\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }\n        }, \"Your transaction is Done\"), /*#__PURE__*/React.createElement(\"a\", {\n          className: \"btn btn-primary d-flex justify-content-center\",\n          href: \"\".concat(SCAN_URL, \"/tx/\").concat(hash),\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(Check, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          className: \"text-white\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 17\n          }\n        }, \"Check it\"))));\n\n      case \"fail\":\n        return /*#__PURE__*/React.createElement(\"button\", {\n          className: \"btn btn-primary d-flex justify-content-center\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Fail, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          className: \"text-white\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }\n        }, \"Failed\")));\n\n      default:\n        return /*#__PURE__*/React.createElement(\"button\", {\n          className: \"btn btn-primary d-flex justify-content-center\",\n          onClick: handleCancelOrder,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 11\n          }\n        }, \"Are you sure to cancel?\");\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-column d-flex align-items-center justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 5\n    }\n  }, renderButtonByStatus(status));\n};\n\nCancelOrder.defaultProps = {\n  itemIndex: -1,\n  onCanceled: function onCanceled() {}\n};\nexport default CancelOrder;","map":{"version":3,"names":["React","useEffect","useState","Check","Spinner","Fail","SCAN_URL","useMarketPlaceContract","CancelOrder","data","itemIndex","onCanceled","status","setStatus","orderId","order_id","hash","receipt","cancelError","error","cancelOrder","code","console","log","indexOf","handleCancelOrder","renderButtonByStatus","defaultProps"],"sources":["/home/sotatek/Music/NFT/src/components/CancelOrder/CancelOrder.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Check from \"../../components/Check/Check\";\nimport Spinner from \"../../components/Spinner/Spinner\";\nimport Fail from \"../../components/Fail/Fail\";\nimport { SCAN_URL } from \"../../config\";\nimport { useMarketPlaceContract } from \"../../utils/smartcontract\";\n\nconst CancelOrder = ({\n  data,\n  itemIndex,\n  onCanceled,\n}) => {\n  const [status, setStatus] = useState(\"\");\n  let orderId = \"\";\n  if (data) {\n    orderId = data.order_id; \n  }\n  const [{ hash, receipt, error: cancelError }, {cancelOrder}] = useMarketPlaceContract();\n\n  useEffect(() => {\n    if (hash) {\n      setStatus(\"transactionHash\");\n    }\n    if (receipt) {\n      if (receipt.code === 4001) {\n        setStatus(\"fail\");\n      } else {\n        setStatus(\"done\");\n      }\n    }\n    if (cancelError) {\n      setStatus(\"fail\");\n      console.log(\"fail\", cancelError);\n    }\n  }, [hash, receipt, cancelError])\n\n\n  useEffect(() => {\n    if ([\"fail\", \"done\"].indexOf(status) !== -1) {\n      onCanceled(status, itemIndex);\n    }\n  }, [status]);\n\n  const handleCancelOrder = async () => {\n    setStatus(\"processing\");\n    cancelOrder(orderId);\n  };\n\n  const renderButtonByStatus = (status) => {\n    switch(status) {\n      case \"processing\":\n        return (\n          <button className=\"btn btn-primary d-flex justify-content-center\">\n            <Spinner>\n              <p className=\"text-white\">Processing...</p>\n            </Spinner>\n          </button>\n        );\n      case \"transactionHash\": \n          return(\n            <>\n              <p className=\"text-color pb-2\">Your transaction is processing</p>\n              <a className=\"btn btn-primary d-flex justify-content-center\"\n                href={`${SCAN_URL}/tx/${hash}`} target=\"_blank\" rel=\"noopener noreferrer\"\n              >\n                <Spinner>\n                  <p className=\"text-white\">Check it</p>\n                </Spinner>\n              </a>\n            </>\n          );\n      case \"done\":\n        return(\n          <>\n            <p className=\"text-color space-y-20\">Your transaction is Done</p>\n            <a className=\"btn btn-primary d-flex justify-content-center\"\n              href={`${SCAN_URL}/tx/${hash}`} target=\"_blank\" rel=\"noopener noreferrer\"\n            >\n              <Check>\n                <p className=\"text-white\">Check it</p>\n              </Check>\n            </a>\n          </>\n        );\n      case \"fail\":\n        return (\n          <button className=\"btn btn-primary d-flex justify-content-center\">\n            <Fail>\n              <p className=\"text-white\">Failed</p>\n            </Fail>\n          </button>\n        );\n      default:\n        return(\n          <button className=\"btn btn-primary d-flex justify-content-center\" onClick={handleCancelOrder}>\n            Are you sure to cancel?\n          </button>\n        )\n    }\n    \n  };\n\n  return (\n    <div className=\"flex-column d-flex align-items-center justify-content-center\">\n      {renderButtonByStatus(status)}\n    </div>\n  );\n}\n\nCancelOrder.defaultProps = {\n  itemIndex: -1,\n  onCanceled: () => {}\n}\n\nexport default CancelOrder;"],"mappings":"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"},"metadata":{},"sourceType":"module"}